<!DOCTYPE html>
<html>
<head>
    <title>FullCalendar RRule Test</title>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
</head>
<body>
    <div id="calendar" style="max-width: 900px; margin: 0 auto;"></div>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const calendarEl = document.getElementById('calendar');
        
        // Test event with RRule - same as our API data
        const testEvent = {
            id: 'rrule-test-1',
            title: 'ðŸ”„ Weekly Test - Eldred Rippin',
            start: '2025-08-11T13:00:00',
            end: '2025-08-11T13:20:00',
            rrule: 'FREQ=WEEKLY;INTERVAL=1;COUNT=4'
        };
        
        console.log('Creating calendar with event:', testEvent);
        
        const calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'timeGridWeek',
            initialDate: '2025-08-11', // Start with original date
            
            headerToolbar: {
                left: 'prev,next today',
                center: 'title', 
                right: 'dayGridMonth,timeGridWeek'
            },
            
            events: [testEvent],
            
            eventClick: function(info) {
                alert(`Event: ${info.event.title}\nDate: ${info.event.start.toDateString()}\nTime: ${info.event.start.toLocaleTimeString()}`);
            },
            
            eventDidMount: function(info) {
                console.log('Event rendered:', {
                    id: info.event.id,
                    title: info.event.title,
                    start: info.event.start.toISOString(),
                    isRecurring: !!info.event.extendedProps.rrule
                });
            }
        });
        
        calendar.render();
        
        // Add navigation buttons
        setTimeout(() => {
            const container = document.body;
            const navDiv = document.createElement('div');
            navDiv.style.cssText = 'text-align: center; margin: 20px; padding: 10px; background: #f0f0f0;';
            navDiv.innerHTML = `
                <h3>Navigation Test</h3>
                <button onclick="calendar.gotoDate('2025-08-11')" style="margin: 5px; padding: 8px 15px;">Week 1 (Aug 11) - Original</button>
                <button onclick="calendar.gotoDate('2025-08-18')" style="margin: 5px; padding: 8px 15px;">Week 2 (Aug 18) - Should have recurring instance</button>
                <button onclick="calendar.gotoDate('2025-08-25')" style="margin: 5px; padding: 8px 15px;">Week 3 (Aug 25) - Should have recurring instance</button>
                <button onclick="calendar.gotoDate('2025-09-01')" style="margin: 5px; padding: 8px 15px;">Week 4 (Sep 1) - Should have recurring instance</button>
            `;
            container.appendChild(navDiv);
        }, 1000);
        
        // Debug: Check if rrule plugin is available
        console.log('FullCalendar version:', FullCalendar.VERSION);
        console.log('FullCalendar plugins available:', Object.keys(FullCalendar));
        console.log('RRule support available:', !!FullCalendar.RRule);
        
    });
    </script>
</body>
</html>